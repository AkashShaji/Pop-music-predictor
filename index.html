<!DOCTYPE html>
<html>
<head>
  <title>Spotify Web Playback SDK Quick Start Tutorial</title>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.0/css/bootstrap.min.css" integrity="sha384-9gVQ4dYFwwWSjIDZnLEWnxCjeSWFphJiwGPXr1jddIhOegiu1FwO5qRGvFXOdJZ4" crossorigin="anonymous">

</head>
<body>
  <div>
    <h1>Will the current song be a hit????</h1>
    <button type="button" class="btn btn-primary" onclick = "doThing()">Find</button>
    <div class = "energy">
        <div class ="progress-bar" role="progressbar" aria-valuenow="70" aria-valuemin="0" aria-valuemax="100" style="width:70%">
            70%
  </div>


  <script>
  function doThing(){
     token = "BQAO4EKs93ElY4bseSPe_KMcDetpIoZLOZymR0LjcBi2KvZnA7ekGTU02HvztTsXZD58W8pxo3EYTO1rK8Kh4ck3xkUym3BvflVRtgZ51UjsS7NkPcxDlcHsNkoDpqnAhk4I32YWz1QgTUADSQ";
     $.ajax({
        url: "  https://api.spotify.com/v1/me/player",
        beforeSend: function(xhr) {
             xhr.setRequestHeader("Authorization", "Bearer " + token)
        }, success: function(data){
          $.ajax({
            url: "https://api.spotify.com/v1/audio-features/" + data['item']['id'],
            beforeSend: function(xhr) {
                 xhr.setRequestHeader("Authorization", "Bearer " + token)
            }, success: function(data2){
              if(data2['key'] == 7 || data2['key'] == 0 || data['item']['artists'][0]['id'] == "3TVXtAsR1Inumwj472S9r4" || data2['danceability'] > 0.7){
                alert("A hit is playing! (" + data['item']['name'] + ", by " + data['item']['artists'][0]['name'] + ")")
              }else{
                alert("Doesn't sound like a hit to me.." + "(" + data['item']['name'] + ", by " + data['item']['artists'][0]['name'] + ") It has a danceability of " + data2['danceability'])
                //process the JSON data etc
              
              }
            }
          })
        }
      })
   }
  </script>

</body>
</html>
